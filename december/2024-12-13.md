# TIL Template

## 날짜: 2024-12-13

### 스크럼
- 학습 목표 1 : K8S & Docker 심화
- 학습 목표 2
- 학습 목표 3

### 새로 배운 내용
#### 주제 1: K8S & Docker 심화
GHCR

- Github Container Registry

- 깃허브의 컨테이너 레지스트리 서비스

- 패키지로도 활용 가능

- 깃허브packages에 올릴 수 있다

# 1. Docker 이미지 빌드

docker build -t my-app .

# 2. Docker 이미지 태그 지정

docker tag my-app ghcr.io/myusername/myrepository:latest

# 3. Docker 이미지 푸시

docker push ghcr.io/myusername/myrepository:latest

서버 관리

- 문서화

- Ansible, Chef, Puppet 과 같은 도구를 사용한 서버 관리

- 가상머신으로 서버 관리하기

- 클라우드로 서버 관리하기



GH

- Github CLI

- 이슈 생성, 레포 관리, 시크릿, PR 등을 할 수 있다.

- gh repo create: 새로운 리포지토리 생성

- gh repo clone: 리포지토리 클론

- gh repo view: 리포지토리 상세 보기

- gh issue list: 이슈 목록 보기

- gh issue view: 특정 이슈 상세 보기

- gh issue create: 새로운 이슈 생성

- gh issue close: 이슈 닫기

- gh pr list: PR 목록 보기

- gh pr view: 특정 PR 상세 보기

- gh pr create: 새로운 PR 생성

- gh run list: 워크플로우 실행 목록 보기

- gh run watch: 특정 워크플로우 실행 모니터링

- gh workflow view: 워크플로우 상세 보기



클러스터

- 비슷한 것들이 모여 하나의 그룹을 이룸을 뜻함

- 노드: 클러스터를 구성하는 각 컴퓨터(서버)

- 네트워크: 여러 개의 노드로 구성

- 운영체제: 노드 간의 운영체제 통일화를 권장

- 클러스터 미들웨어: 노드에게 작업 분배



- 사용하는 이유

- 성능 향상: 여러 cpu 처리 능력을 합칠 수 있기에

- 가용성: 한 대가 죽어도 다른 시스템이 계속 작동하여 안정성 높임

- 비용 효율성: 비용 측면에서 작은 컴퓨터 여러대 > 성능 좋은 한대



클러스터 > 노드 > 컨테이너



도커로만 컨테이너를 관리하며 서비스 운영을 하면 생기는 문제점



- 서비스 검색 측면 : LB 수동 설정 번거롭다

- 배포 측면: 컨테이너가 100개라면?

- 서비스 외부 노출 측면: 서비스 확장 -> 도메인 추가 시 매번 AWS에서 설정(라우팅)해줘야 함

- 서비스 이상 발견 및 모니터링 측면 -> 모니터링 서비스 없이 컨테이너 status를 어떻게 관리하지?



k8s

- 컨테이너화 된 서비스를 배포하고 확장하고 관리하는 것을 자동화

- 오픈 소스 플랫폼, 구글에서 처음 만들었다.

- 사용하는 이유

- 컨테이너화된 애플리케이션의 자동 관리

컨테이너는 애플리케이션과 의존성을 패키징하여 실행 환경을 통일시킵니다.

하지만 컨테이너가 많아지면 관리가 복잡해집니다.

Kubernetes는 이를 자동화합니다!

- 컨테이너 배포: 새 버전 배포 시 수동 작업 없이 간단히 업데이트 가능.

- 자동 복구: 실패한 컨테이너를 자동으로 재시작. (셀프 힐링 ❤️‍🩹)

- 확장성

사용량에 따라 컨테이너 수를 자동으로 늘리거나 줄이는 Auto-scaling을 지원합니다.

- 트래픽이 많아지면 더 많은 컨테이너를 생성.

- 사용량이 줄어들면 컨테이너 수를 줄여 리소스 낭비를 방지.

- 로드 밸런싱

여러 컨테이너에 트래픽을 분배하여 시스템 과부하를 방지합니다.

- 고가용성 및 장애 복구

여러 서버에 애플리케이션을 배포하여 서버 장애에도 서비스가 중단되지 않도록 합니다.



- k8s를 도입하게 된다면:

- 효율적이고 안정적인 서비스 운영체제

- 자동화된 배포 및 관리

- 비용 최적화

Docker swarm

- 도커에서 만든 컨테이너 오케스트레이션 도구
